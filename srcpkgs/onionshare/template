# Template file for 'onionshare'
pkgname=onionshare
version=2.3.2
revision=1
build_style=python3-module
pycompile_dirs="/usr/share/nautilus-python/extensions"
hostmakedepends="python3-setuptools"
depends="python3-Flask-HTTPAuth python3-pycryptodome python3-PyQt5
 python3-pysocks python3-requests python3-stem tor obfs4proxy"
short_desc="Share files anonymously and securely"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-3.0-or-later"
homepage="https://onionshare.org/"
changelog="https://raw.githubusercontent.com/micahflee/onionshare/develop/CHANGELOG.md"
distfiles="https://github.com/micahflee/onionshare/archive/v${version}.tar.gz"
checksum=16c856b46213ffa836724415a22291fa4eb820a5425e6d9fbdfd3f11e03ef983

do_build() {
	cd cli
	python3 ./setup.py build
	cd ../desktop/src
	python3 ./setup.py build
}

do_check() {
	cd cli
	python3 ./setup.py test
}

do_install() {
	cd cli
	python3 ./setup.py install --prefix=/usr --root=${DESTDIR}
	cd ../desktop/src
	python3 ./setup.py install --prefix=/usr --root=${DESTDIR}
}
